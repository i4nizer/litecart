{"modifications":{"minicart_overlay_2":{"type":"vmod","id":"minicart_overlay_2","name":"Minicart Overlay 2","version":"2024-10-08","author":"Jack Maessen","date_modified":"2024-10-08 12:21:42","aliases":[],"settings":[],"files":{"includes/functions/func_form.inc.php":{"name":"includes/functions/func_form.inc.php","operations":[{"onerror":"warning","find":{"pattern":"#^.*$#s","indexes":""},"insert":"$0  function form_draw_overlay_cart_number_field(\\$name, \\$value=true, \\$min=null, \\$max=null, \\$parameters='') {\n    if (\\$value === true) \\$value = (int)form_reinsert_value(\\$name);\n\n    if (\\$value != '') {\n      \\$value = floor(\\$value);\n    }\n\n    return '<input '. (!preg_match('#class=\"([^\"]+)?\"#', \\$parameters) ? 'class=\"form-control\"' : '') .' type=\"number\" name=\"'. functions::escape_html(\\$name) .'\" value=\"'. functions::escape_html(\\$value) .'\" data-type=\"overlaycartnumber\"'. ((\\$min !== null) ? ' min=\"'. (int)\\$min .'\"' : '') . ((\\$max !== null) ? ' max=\"'. (int)\\$max .'\"' : '') . ((\\$parameters) ? ' ' . \\$parameters : '') . (!preg_match('#step=\"([^\"]+)?\"#', \\$parameters) ? ' step=\"any\"' : '') .' />';\n  }\n"}]},"includes/templates/*.catalog/pages/product.inc.php":{"name":"includes/templates/*.catalog/pages/product.inc.php","operations":[{"onerror":"warning","find":{"pattern":"#^.*$#s","indexes":""},"insert":"$0<script>\n// click add product, show header-quantity; red circle\n\\$('button[name=\"add_cart_product\"]').on('click', function() {\n\t\\$('.header-quantity').show();\n});\n</script>\n"}]},"includes/templates/*.catalog/views/box_cart.inc.php":{"name":"includes/templates/*.catalog/views/box_cart.inc.php","operations":[{"onerror":"warning","find":{"pattern":"#^.*$#s","indexes":""},"insert":"<style>\n#cart-overlay .badge {\n    background: #c90000;\n    border-radius: 2rem;\n    padding: 0.25em 0em;\n    display: inline-block;\n    text-align: center;\n    color: #fff;\n    position: relative;\n    top: -4px;\n    right: -5px;\n    width: 2em;\n    animation: pulsating 1.5s linear infinite;\n    font-size: 10px;\n\tborder-bottom: 1px solid #333;\n}\n.card-header {\n\tpadding-bottom: 10px;\n\tborder-bottom: 1px solid #f6f6f6;\n}\n.shopping-cart-content .text-center {\n    padding-top: 20px;\n}\na#cart-overlay {\n\ttext-decoration: none;\n}\n.card-footer.subtotal.text-end {\n    margin-right: 10px;\n\tmargin-bottom: 15px;\n}\n\n.btn-proceed-checkout {\n\tcolor: #fff !important;\n\twidth: 100%;\n        margin-bottom: 40px;\n\tposition: relative;\n\n}\n\n.mask {\n    display: none;\n    position: fixed;\n    top: 0;\n    left: 0;\n    z-index: 100;\n    width: 100%;\n    height: 100%;\n    background: rgba(0, 0, 0, 0.5);\n}\n\n.shopping-cart {\n    position: fixed;\n    z-index: 1000;\n    background-color: #fff;\n    overflow: hidden;\n    -webkit-transition: all 0.3s;\n    -moz-transition: all 0.3s;\n    -ms-transition: all 0.3s;\n    -o-transition: all 0.3s;\n    transition: all 0.3s;\n\tpadding: 15px 15px 15px 15px;\n\t/*overflow-y: auto;*/\n\tright: -600px;\n    top: 0;\n    width: 360px;\n    height: 100%;\n\t/*padding-bottom: 50px;*/\n    font-size: 14px;\n\n}\n.shopping-cart-content {\n    margin-top: 36px;\n    overflow-y: auto;\n    height: 100%;\n\n}\n\n.featherlight-close{\n    display: block;\n\tright: 15px;\n\tposition: absolute;\n\tcursor: pointer;\n\tfont-size: 25px;\n}\n\nbody.sr-open .shopping-cart {\n    right: 0;\n}\n\n@media only screen and (max-width: 600px) {\n\t.shopping-cart {\n\t\twidth: 100%;\n\t}\n\n}\n\n@media (min-width: 992px)  {\n    .shopping-cart:after {\n        right: 10px;\n    }\n}\n@media (max-width: 767px) {\n    .shopping-cart:after {\n        right: 55px;\n    }\n\n}\n\n#box-checkout-overlay-cart .btn {\n    padding-left: 1em;\n    padding-right: 1em;\n}\n.input-group-sm>.form-control, .input-group-sm>.form-select, .input-group-sm>.input-group-text {\n    padding: .25rem .5rem;\n    font-size: .875rem;\n    border-radius: .2rem;\n}\n.overlay-row {\n  padding: 8px;\n  background: var(--input-background-color);\n  border-radius: 8px;\n  grid-gap: 0px !important;\n\n}\n\n</style>\n\n<a id=\"cart\" class=\"text-center\" href=\"#<?php //echo functions::escape_html($link); ?>\">\n  <!--<img class=\"image\" src=\"/includes/templates/default.admin/images/<?php echo !empty($num_items) ? 'cart_filled.svg' : 'cart.svg'; ?>\" alt=\"\" />-->\n  <div class=\"navbar-icon\"><?php echo functions::draw_fonticon('fa-shopping-basket'); ?></div>\n  <small class=\"hidden-xs\"><?php echo language::translate('title_cart', 'Cart'); ?></small>\n  <div class=\"badge quantity header-quantity\"><?php echo $num_items ? $num_items : ''; ?></div>\n</a>\n\n<div class=\"shopping-cart\">\n\n\t<div class=\"featherlight-close-icon featherlight-close\" aria-label=\"Close\">\u2716</div>\n\n\t<div class=\"shopping-cart-content\"></div>\n\n</div>\n\n<script>\n$('.shopping-cart').click(function(e) {\n\te.stopPropagation();\n});\n\nshoppingcartOverlay();\n\nfunction shoppingcartOverlay(){\n\n    var body = $('body'),\n        mask = $('<div class=\"mask\"></div>'),\n        active = '';\n\n    $('body').append(mask);\n\n    /* hide active shopping-cart if close shopping-cart button or body is clicked */\n    $(\".featherlight-close, body\").on('click', function(){\n        $('body').removeClass(\"sr-open\");\n        active = \"\";\n        $('.mask').fadeOut();\n    });\n\n}\n\n$('#cart').on('click', function(e) {\n\te.stopPropagation();\n\t/* slide shopping-cart right */\n\t$('body').addClass(\"sr-open\");\n    $('.mask').fadeIn();\n    active = \"sr-open\";\n\n\t// fetch data for overlay cart\n\t$.ajax({\n\t\turl: '<?php echo document::ilink('checkout_overlay'); ?>',\n\t\ttype: \"POST\",\n\t\tcache: false,\n\t\tsuccess: function (data) {\n\t\t\t$('.shopping-cart-content').html(data).hide().fadeIn('slow');\n\t\t\t// add proceed-checkout button\n\t\t\t$('.shopping-cart-content').append('<a href=\"<?php echo functions::escape_html($link); ?>\" class=\"btn btn-success btn-proceed-checkout\" type=\"button\"><?php echo language::translate('title_proceed_checkout', 'Proceed Checkout'); ?></a>');\n\t\t},\n\n\t});\n\n});\n</script>\n\n"}]}},"install":null,"upgrades":[]},"minicart_overlay_switch_interface":{"type":"vmod","id":"minicart_overlay_switch_interface","name":"Minicart overlay  switch interface","version":"2024-10-08","author":"Jack Maessen","date_modified":"2024-10-08 12:21:42","aliases":[],"settings":[],"files":{"admin/vmods.app/vmods.inc.php":{"name":"admin/vmods.app/vmods.inc.php","operations":[{"onerror":"warning","find":{"pattern":"#[ \\t]*foreach \\(\\$_POST\\['vmods'\\] as \\$vmod\\) \\{[ \\t]*(?:\\r\\n?|\\n|$)[ \\t]*(?:\\r\\n?|\\n)[ \\t]*if \\(\\!empty\\(\\$_POST\\['enable'\\]\\)\\) \\{[ \\t]*(?:\\r\\n?|\\n|$)[ \\t]*if \\(\\!is_file\\(FS_DIR_STORAGE \\. 'vmods/' \\. pathinfo\\(\\$vmod, PATHINFO_FILENAME\\) \\.'\\.disabled'\\)\\) continue;[ \\t]*(?:\\r\\n?|\\n|$)[ \\t]*rename\\(FS_DIR_STORAGE \\. 'vmods/' \\. pathinfo\\(\\$vmod, PATHINFO_FILENAME\\) \\.'\\.disabled', FS_DIR_STORAGE \\. 'vmods/' \\. pathinfo\\(\\$vmod, PATHINFO_FILENAME\\) \\.'\\.xml'\\);[ \\t]*(?:\\r\\n?|\\n|$)[ \\t]*\\} else \\{[ \\t]*(?:\\r\\n?|\\n|$)[ \\t]*if \\(\\!is_file\\(FS_DIR_STORAGE \\. 'vmods/' \\. pathinfo\\(\\$vmod, PATHINFO_FILENAME\\) \\.'\\.xml'\\)\\) continue;[ \\t]*(?:\\r\\n?|\\n|$)[ \\t]*rename\\(FS_DIR_STORAGE \\. 'vmods/' \\. pathinfo\\(\\$vmod, PATHINFO_FILENAME\\) \\.'\\.xml', FS_DIR_STORAGE \\. 'vmods/' \\. pathinfo\\(\\$vmod, PATHINFO_FILENAME\\) \\.'\\.disabled'\\);[ \\t]*(?:\\r\\n?|\\n|$)[ \\t]*\\}[ \\t]*(?:\\r\\n?|\\n|$)[ \\t]*\\}[ \\t]*(?:\\r\\n?|\\n|$)#","indexes":""},"insert":"foreach (\\$_POST['vmods'] as \\$vmod) {\n\n\tif (!empty(\\$_POST['enable'])) { // if chosen enable\n\n\t\tif(\\$vmod == 'minicart_overlay_1.disabled') {\n\t\t\tif (file_exists(\\$file = FS_DIR_STORAGE . 'vmods/minicart_overlay_2.xml')) {\n\t\t\t\trename(\\$file, preg_replace('#\\\\.xml\\$#', '.disabled', \\$file));\n\t\t\t}\n\t\t}\n\t\telseif(\\$vmod == 'minicart_overlay_2.disabled') {\n\t\t\tif (file_exists(\\$file = FS_DIR_STORAGE . 'vmods/minicart_overlay_1.xml')) {\n\t\t\t   rename(\\$file, preg_replace('#\\\\.xml\\$#', '.disabled', \\$file));\n\t\t\t}\n\t\t}\n\t\telseif (!is_file(FS_DIR_STORAGE . 'vmods/' . pathinfo(\\$vmod, PATHINFO_FILENAME) .'.disabled')) continue;\n\t\trename(FS_DIR_STORAGE . 'vmods/' . pathinfo(\\$vmod, PATHINFO_FILENAME) .'.disabled', FS_DIR_STORAGE . 'vmods/' . pathinfo(\\$vmod, PATHINFO_FILENAME) .'.xml');\n\n\t} else { // if chosen disable\n                if(\\$vmod == 'minicart_overlay_switch_interface.xml') {\n\t\t    throw new Exception(language::translate('error_changes_saved', 'You can\\\\'t set this vmod to disabled'));\n\t\t    header('Location: '. document::link());\n\t\t    exit;\n\t\t}\n\n\t\tif (!is_file(FS_DIR_STORAGE . 'vmods/' . pathinfo(\\$vmod, PATHINFO_FILENAME) .'.xml')) continue;\n\t\trename(FS_DIR_STORAGE . 'vmods/' . pathinfo(\\$vmod, PATHINFO_FILENAME) .'.xml', FS_DIR_STORAGE . 'vmods/' . pathinfo(\\$vmod, PATHINFO_FILENAME) .'.disabled');\n\t}\n}\n"}]}},"install":null,"upgrades":[]}},"index":{"includes/functions/func_form.inc.php":[{"id":"minicart_overlay_2","key":"includes/functions/func_form.inc.php"}],"includes/templates/default.catalog/pages/product.inc.php":[{"id":"minicart_overlay_2","key":"includes/templates/*.catalog/pages/product.inc.php"}],"includes/templates/default.catalog/views/box_cart.inc.php":[{"id":"minicart_overlay_2","key":"includes/templates/*.catalog/views/box_cart.inc.php"}],"admin/vmods.app/vmods.inc.php":[{"id":"minicart_overlay_switch_interface","key":"admin/vmods.app/vmods.inc.php"}]}}